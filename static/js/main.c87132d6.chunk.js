(this["webpackJsonposu-rhythm-practice"]=this["webpackJsonposu-rhythm-practice"]||[]).push([[0],{174:function(t,e,n){},176:function(t,e,n){"use strict";n.r(e);var i,a,c,r,s,o,h,l,u,d,b,j,m,x=n(0),g=n(56),p=n.n(g),f=n(37),v=n(9),O=n(2),k=n(3),w=k.a.p(i||(i=Object(O.a)(["\n    font-family: 'Roboto';\n    font-weight: ",";\n    font-size: ",";\n    color: white;\n"])),(function(t){return t.weight?t.weight:"normal"}),(function(t){return t.size?t.size:"normal"})),y=k.a.div(a||(a=Object(O.a)(["\n    display: flex;\n"]))),T=Object(k.a)(y)(c||(c=Object(O.a)(["\n    background-color: #26304F;\n    border-radius: 8px;\n"]))),C=Object(k.a)(y)(r||(r=Object(O.a)(["\n  display: block;\n  flex-direction: column;\n  overflow: scroll;;\n  overflow-x: hidden;\n  align-items: center;\n  margin: 0px 50px 0px 50px;\n  margin-top: 35px;\n  min-height: 300px;\n  grid-area: s;\n\n  &::-webkit-scrollbar {\n    width: 18px;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #425FB0;\n    border-radius: 9px;\n  }\n"]))),D=Object(k.a)(y)(s||(s=Object(O.a)(["\n  background: #26304F;\n  margin: 0 10px 6px 0;\n  border-radius: 9px;\n  height: 46px;\n\n  &:hover {\n    background: #2c3757;\n    transition: all .2s ease-in-out;\n    transform: scale(1.004);\n    cursor: pointer;\n  }\n"]))),S=k.a.input.attrs({type:"range"})(o||(o=Object(O.a)(["\n    margin: 0px 50px 0px 50px;\n    grid-area: p;\n  "]))),z=Object(k.a)(y)(h||(h=Object(O.a)(["\n  justify-content: center;\n  align-items: center;\n  background-color: #192035;\n  width: 100%;\n  height: ",";\n  margin-bottom: ",";\n"])),(function(t){return t.nav?"80px":"50px"}),(function(t){return t.nav?"30px":""})),_=n(1),L=function(){return Object(_.jsx)(z,{height:"50px"})},P=function(t){return Object(_.jsx)(z,{nav:!0,children:t.children})},R=Object(k.a)(y)(l||(l=Object(O.a)(["\n  flex-direction: column;\n  justify-content: space-between;\n  grid-area: k;\n"]))),E=Object(k.a)(T)(u||(u=Object(O.a)(["\n  background-color: ",";\n  transform: ",";\n  color: ",";\n  justify-content: center;\n  align-items: center;\n  font-family: 'Roboto';\n  font-size: 3em;\n  width: 140px;\n  height: 140px;\n  transition: all .05s ease-in-out;\n"])),(function(t){return t.keyDown?"#667293":"#4e5874"}),(function(t){return t.keyDown?"scale(1.04)":"scale(1)"}),(function(t){return t.keyDown?"#26304F":"#7783a3"})),B=n(60),M=Object(x.createContext)(),F=function(){return Object(x.useContext)(M)},A=function(t){var e=t.children,n={startTime:Date.now(),clicks:[],avg_accuracy:[],avg_unstable_rate:[],avg_bpm:[]},i=Object(x.useState)(n),a=Object(v.a)(i,2),c=a[0],r=a[1];return Object(_.jsx)(M.Provider,{value:{graphData:c,setGraphData:r},children:e})},I=function(t){var e=F(),n=e.graphData,i=(e.setGraphData,{labels:n.clicks.map((function(t){return t.time})),datasets:[{label:"Accuracy",fill:!1,lineTension:0,borderColor:"#ff0000",data:[]},{label:"Unstable Rate",fill:!1,lineTension:0,borderColor:"#94D210",data:[]},{label:"Bpm",fill:!1,lineTension:0,borderColor:"#0FB6EB",data:n.avg_bpm}]});return Object(_.jsx)(T,{style:{gridArea:"g"},children:Object(_.jsx)(B.Line,{data:i,options:{maintainAspectRatio:!1,elements:{point:{radius:0}}}})})},H=k.a.div(d||(d=Object(O.a)(['\n  display: grid;\n  width: auto;\n  height: 100%;\n  gap: 50px;\n  margin: 0 50px 35px 50px;\n  grid-template-columns: 250px 1fr 105px;\n  grid-template-rows: 300px 300px;\n  height: 700px;\n  grid-template-areas: \n  "o g g"\n  "k c c";\n']))),G=Object(k.a)(y)(b||(b=Object(O.a)(["\n  flex-direction: column;\n  width: 100%;\n  height: 100vh;\n"]))),W=n(7),J=function t(e,n){var i=this;Object(W.a)(this,t),this.drawCanvasBackground=function(){i.ctx.fillStyle="#26304F",i.ctx.fillRect(0,0,i.canvas.width,i.canvas.height)},this.updateCanvasSize=function(){i.canvas.style.width="100%",i.canvas.style.height="100%",i.canvas.width=i.canvas.offsetWidth,i.canvas.height=i.canvas.offsetHeight},this.winResizeHandle=function(){i.updateCanvasSize(),i.drawCanvasBackground()},this.canvas=e,this.ctx=n,this.winResizeHandle()},q=n(25),U=function(){function t(e,n){Object(W.a)(this,t),this.canvas=e,this.ctx=n}return Object(q.a)(t,[{key:"Circle",value:function(t,e,n,i,a){this.ctx.beginPath(),this.ctx.arc(t+125,e,n,0,2*Math.PI,!1),this.ctx.strokeStyle=a,this.ctx.lineWidth=i,this.ctx.closePath(),this.ctx.stroke()}},{key:"Line",value:function(t,e,n,i){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(n,i),this.ctx.closePath(),this.ctx.stroke()}},{key:"Arcs",value:function(t,e,n,i,a){this.ctx.strokeStyle="#494949",this.ctx.lineWidth=9,this.ctx.beginPath(),this.ctx.arc(e-a+1.5*i-12,n,i,1.5*Math.PI,.5*Math.PI),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(t-a+1.5*i-12,n,i,.5*Math.PI,1.5*Math.PI),this.ctx.stroke()}},{key:"hitCircle",value:function(t,e,n,i,a){var c=t-a;this.Circle(c,e,n,9,"#425FB0"),this.Circle(c,e,.85*n,12,"#494949");var r=i<5?1800-120*i:1950-150*i,s=Math.min(800,r);if(c<r){var o=2*n,h=3*o,l=Math.round((o+(h-o)*(c<r+s&&c>0?c/(r+s):1))/2);l==o+n&&(l=0);this.Circle(c,e,l,5,"rgba(151, 159, 182, ".concat(1,")"))}}},{key:"slider",value:function(t,e,n,i,a,c){var r=t-c,s=e-c;this.Arcs(t,e,n,i,c),this.Line(r+1.5*i-12,n-i,s+1.5*i,n-i),this.Line(r+1.5*i-12,n+i,s+1.5*i,n+i),r<0&&(t=c),t>e&&(t=e),this.hitCircle(t,n,i,a,c)}}]),t}(),K=(n(175),function(){function t(e,n,i,a){var c=this;Object(W.a)(this,t),this.getScore=function(t){switch(!0){case t<=c.mehTime&&t>c.goodTime:return"meh";case t<=c.goodTime&&t>c.greatTime:return"good";case t<=c.greatTime:return"great"}},this.draw=a,this.canvas=i,this.startTime=!1,this.hitObjects=e,this.bpm=n.bpm,this.hp=n.hp,this.ar=n.ar,this.od=n.od,this.keys=n.keys,this.notelock=n.notelock,this.mehTime=200-10*this.od,this.goodTime=140-8*this.od,this.greatTime=80-6*this.od}return Object(q.a)(t,[{key:"render",value:function(t){var e=this,n=t-this.startTime;this.hitObjects.forEach((function(t){switch(t.constructor.name){case"Circle":t.time-n>0&&t.time-n<e.canvas.width+90&&!t.score&&e.draw.hitCircle(t.time,e.canvas.height/2,90,e.ar,n);break;case"Slider":t.endTime-n>0&&t.time-n<e.canvas.width+90&&!t.score&&e.draw.slider(t.time,t.endTime,e.canvas.height/2,90,e.ar,n)}t.time-n<-e.mehTime&&!t.score&&(t.score="miss",console.log("miss"))}))}},{key:"hit",value:function(t){for(var e=t-this.startTime,n=0;n<this.hitObjects.length;n++){var i=this.hitObjects[n],a=e-i.time;if(e<=i.time+this.mehTime&&e>=i.time-this.mehTime&&!i.score){this.hitObjects[n].score=this.getScore(Math.abs(a)),console.log(i.score);break}this.notelock&&(n>0?this.hitObjects[n-1].time+this.mehTime:0)<e&&console.log("Shake")}}}]),t}()),N=function t(e){Object(W.a)(this,t),this.time=e,this.score=null},Q=Object(k.a)(T)(j||(j=Object(O.a)(["\n  grid-area: o;\n"]))),V=k.a.canvas(m||(m=Object(O.a)(["\n  border-radius: 9px;\n  grid-area: c;\n"]))),X=function(){var t=Object(x.useRef)(null),e=!1,n=[!1,!1],i=F(),a=i.graphData,c=i.setGraphData,r=Object(x.useState)(0),s=Object(v.a)(r,2),o=s[0],h=s[1],l=Object(x.useState)(0),u=Object(v.a)(l,2),d=u[0],b=u[1],j=Object(x.useState)(0),m=Object(v.a)(j,2),g=m[0],p=m[1],O=Object(x.useState)(0),k=Object(v.a)(O,2),y=k[0],T=k[1],z=function(t,n,i){return"x"!=t&&"z"!=t||!e?" "==t&&n&&(console.log(e?"Stop":"Start"),(e=!e)&&c({startTime:i,clicks:[],avg_accuracy:[],avg_unstable_rate:[],avg_bpm:[]})):(!function(t,e){c((function(n){var i=[].concat(Object(f.a)(n.clicks),[{key:t,pressed:e,time:Date.now()}]),c=i.filter((function(t){return t.pressed}));if(0==c.length)return n;var r=[].concat(Object(f.a)(a.avg_bpm),[Math.round(c.length/(c[c.length-1].time-n.startTime)*6e4/4*100/100)]);return{startTime:n.startTime,clicks:i,avg_accuracy:[],avg_unstable_rate:[],avg_bpm:r}}))}(t,n),"x"==t?(n&&h((function(t){return t+1})),p(n)):(n&&b((function(t){return t+1})),T(n))),n};return Object(x.useEffect)((function(){var e=t.current,i=e.getContext("2d"),a=[];a.push(new N(1e3));var c=new U(e,i),r=new J(e,i),s=new K(a,{bpm:180,od:8,hp:5,ar:9,notelock:!0,keys:["z","x"]},e,c);s.startTime=Date.now(),function t(){s.startTime&&(r.drawCanvasBackground(),s.render(Date.now())),window.requestAnimationFrame(t)}();var o=function(t){var e="x"==t.key?0:1,i=Date.now();if("keydown"==t.type){if(n[e])return;n[e]=z(t.key.toLowerCase(),!0,i),s.hit(i)}else n[e]=z(t.key.toLowerCase(),!1,i)};return document.addEventListener("keydown",o,!1),document.addEventListener("keyup",o,!1),window.addEventListener("resize",r.winResizeHandle),function(){document.removeEventListener("keydown",o,!1),document.removeEventListener("keyup",o,!1),window.removeEventListener("resize",r.winResizeHandle)}}),[]),Object(_.jsxs)(G,{children:[Object(_.jsx)(P,{children:Object(_.jsx)(w,{size:"35px",children:"osu! Rhythm practice"})}),Object(_.jsxs)(H,{children:[Object(_.jsx)(Q,{}),Object(_.jsx)(I,{}),Object(_.jsx)(V,{ref:t}),Object(_.jsxs)(R,{children:[Object(_.jsx)(E,{id:"key1",keyDown:g,children:o}),Object(_.jsx)(E,{id:"key2",keyDown:y,children:d})]})]}),Object(_.jsx)(S,{}),Object(_.jsxs)(C,{children:[Object(_.jsx)(D,{}),Object(_.jsx)(D,{}),Object(_.jsx)(D,{}),Object(_.jsx)(D,{}),Object(_.jsx)(D,{}),Object(_.jsx)(D,{}),Object(_.jsx)(D,{}),Object(_.jsx)(D,{}),Object(_.jsx)(D,{})]}),Object(_.jsx)(L,{})]})};n(174);p.a.render(Object(_.jsx)(A,{children:Object(_.jsx)(X,{})}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.c87132d6.chunk.js.map