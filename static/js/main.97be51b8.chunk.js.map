{"version":3,"sources":["components/Text.jsx","components/FlexDiv.jsx","components/Container.jsx","components/Table.jsx","components/PlaybackBar.jsx","components/MarginDiv.jsx","components/Footer.jsx","components/NavDiv.jsx","components/Keys.jsx","contexts/GraphData.jsx","components/LineGraph.jsx","components/ContentContainer.jsx","components/BackgroundContainer.jsx","utils/canvas.jsx","utils/draw.jsx","App.jsx","index.js"],"names":["Text","styled","p","props","weight","size","FlexDiv","div","Container","Table","TableRow","PlaybackBar","input","attrs","type","MarginDiv","nav","FooterDiv","height","NavDiv","children","Keys","Key","keyDown","GraphDataContext","createContext","useGraphData","useContext","GraphContextProvider","data","startTime","Date","now","clicks","avg_accuracy","avg_unstable_rate","avg_bpm","useState","graphData","setGraphData","Provider","value","LineGraph","labels","map","e","time","datasets","label","fill","lineTension","borderColor","style","gridArea","options","maintainAspectRatio","elements","point","radius","ContentContainer","BackgroundContainer","CanvasUtils","canvas","ctx","drawCanvasBackground","fillStyle","fillRect","width","updateCanvasSize","offsetWidth","offsetHeight","winResizeHandle","this","DrawUtils","posX","posY","ac_width","color","beginPath","arc","Math","PI","strokeStyle","lineWidth","stroke","closePath","circleTime","AR","gameTime","preempt","fadein","Circle","diameter","difference","ar_radius","Options","Canvas","App","canvasRef","useRef","mapInProgress","key1State","setKey1State","key2State","setKey2State","keyIsDown1","setKeyDown1","keyIsDown2","setKeyDown2","keyPress","ekey","down","console","log","gd","updatedClicks","downClicks","filter","c","pressed","length","updatedAvgBpm","round","updateData","ks","keyPressHandle","key","id","toLowerCase","useEffect","current","getContext","Utils","Draw","centerY","hitCircles","HitCircle","hitCircle","i","hc","push","setInterval","forEach","o","draw","document","addEventListener","window","removeEventListener","ref","Footer","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.97be51b8.chunk.js","sourcesContent":["import styled from 'styled-components';\r\n\r\nconst Text = styled.p`\r\n    font-family: 'Roboto';\r\n    font-weight: ${props => props.weight ? props.weight : 'normal'};\r\n    font-size: ${props => props.size ? props.size : 'normal'};\r\n    color: white;\r\n`\r\n\r\nexport default Text;","import styled from 'styled-components';\r\n\r\nconst FlexDiv = styled.div`\r\n    display: flex;\r\n`\r\n\r\nexport default FlexDiv;","import styled from 'styled-components';\r\nimport FlexDiv from './FlexDiv';\r\n\r\nconst Container = styled(FlexDiv)`\r\n    background-color: #26304F;\r\n    border-radius: 8px;\r\n`;\r\n\r\nexport default Container;","import styled from 'styled-components';\r\nimport FlexDiv from './FlexDiv';\r\n\r\n// Scores\r\nconst Table = styled(FlexDiv)`\r\n  display: block;\r\n  flex-direction: column;\r\n  overflow: scroll;;\r\n  overflow-x: hidden;\r\n  align-items: center;\r\n  margin: 0px 50px 0px 50px;\r\n  margin-top: 35px;\r\n  min-height: 300px;\r\n  grid-area: s;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 18px;\r\n  }\r\n  \r\n  &::-webkit-scrollbar-thumb {\r\n    background: #425FB0;\r\n    border-radius: 9px;\r\n  }\r\n`;\r\n\r\nconst TableRow = styled(FlexDiv)`\r\n  background: #26304F;\r\n  margin: 0 10px 6px 0;\r\n  border-radius: 9px;\r\n  height: 46px;\r\n\r\n  &:hover {\r\n    background: #2c3757;\r\n    transition: all .2s ease-in-out;\r\n    transform: scale(1.004);\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport { Table, TableRow };\r\n","import styled from 'styled-components';\r\n\r\n// Playback bar\r\nconst PlaybackBar = styled.input.attrs({\r\n    type: 'range',\r\n  })`\r\n    margin: 0px 50px 0px 50px;\r\n    grid-area: p;\r\n  `;\r\n\r\nexport default PlaybackBar;","import styled from 'styled-components';\r\nimport FlexDiv from './FlexDiv';\r\n\r\nconst MarginDiv = styled(FlexDiv)`\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #192035;\r\n  width: 100%;\r\n  height: ${props => props.nav ? \"80px\" : \"50px\"};\r\n  margin-bottom: ${props => props.nav ? \"30px\" : \"\"};\r\n`;\r\n\r\nexport default MarginDiv;\r\n\r\n","import MarginDiv from './MarginDiv';\r\n\r\n\r\nconst FooterDiv = () => {\r\n    return <MarginDiv height={\"50px\"}/>\r\n}\r\n\r\nexport default FooterDiv;","import MarginDiv from './MarginDiv';\r\n\r\n\r\nconst NavDiv = (props) => {\r\n    return <MarginDiv nav>{props.children}</MarginDiv>\r\n}\r\n\r\nexport default NavDiv;\r\n\r\n","import styled from 'styled-components';\r\nimport FlexDiv from './FlexDiv';\r\nimport Container from './Container';\r\n\r\n// Keys\r\nconst Keys = styled(FlexDiv)`\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  grid-area: k;\r\n`;\r\n\r\nconst Key = styled(Container)`\r\n  background-color: ${props => props.keyDown ? \"#667293\" : \"#4e5874\"};\r\n  transform: ${props => props.keyDown ? \"scale(1.04)\" : \"scale(1)\"};\r\n  color: ${props => props.keyDown ? \"#26304F\" : \"#7783a3\"};\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: 'Roboto';\r\n  font-size: 3em;\r\n  width: 140px;\r\n  height: 140px;\r\n  transition: all .05s ease-in-out;\r\n`\r\n\r\nexport { Keys, Key };","import { useContext, createContext, useState } from 'react';\r\n\r\nexport const GraphDataContext = createContext();\r\n\r\nexport const useGraphData = () => {\r\n    return useContext(GraphDataContext);\r\n}\r\n\r\nexport const GraphContextProvider = ({children}) => {\r\n\r\n    const data = {\r\n        startTime: Date.now(),\r\n        clicks: [],\r\n        avg_accuracy: [],\r\n        avg_unstable_rate: [],\r\n        avg_bpm: []\r\n    };\r\n\r\n    const [graphData, setGraphData] = useState(data);\r\n\r\n    return <GraphDataContext.Provider value={{graphData, setGraphData}}>{children}</GraphDataContext.Provider>;\r\n}","import { Line } from 'react-chartjs-2';\r\nimport Container from './Container';\r\nimport { useGraphData } from '../contexts/GraphData';\r\n\r\n\r\nconst LineGraph = (props) => {\r\n\r\n    const {graphData, setGraphData} = useGraphData();\r\n\r\n    const data = {\r\n    labels: graphData.clicks.map(e => e.time),\r\n    datasets: [\r\n    {\r\n        label: 'Accuracy',\r\n        fill: false,\r\n        lineTension: 0,\r\n        borderColor: '#ff0000',\r\n        data: []\r\n    },\r\n    {\r\n        label: 'Unstable Rate',\r\n        fill: false,\r\n        lineTension: 0,\r\n        borderColor: '#94D210',\r\n        data: []\r\n    },\r\n    {\r\n        label: 'Bpm',\r\n        fill: false,\r\n        lineTension: 0,\r\n        borderColor: '#0FB6EB',\r\n        data: graphData.avg_bpm\r\n    },\r\n    ],\r\n};\r\n\r\n\r\n    return (\r\n        <Container style={{gridArea:\"g\"}}>\r\n            <Line data={data} options={{maintainAspectRatio: false, elements: { point:{ radius: 0 } }}}/>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default LineGraph;","import styled from 'styled-components';\r\n\r\nconst ContentContainer = styled.div`\r\n  display: grid;\r\n  width: auto;\r\n  height: 100%;\r\n  gap: 50px;\r\n  margin: 0 50px 35px 50px;\r\n  grid-template-columns: 250px 1fr 105px;\r\n  grid-template-rows: 300px 300px;\r\n  height: 700px;\r\n  grid-template-areas: \r\n  \"o g g\"\r\n  \"k c c\";\r\n`;\r\n\r\n\r\nexport default ContentContainer;","import styled from 'styled-components';\r\nimport FlexDiv from './FlexDiv';\r\n\r\n\r\nconst BackgroundContainer = styled(FlexDiv)`\r\n  flex-direction: column;\r\n  width: 100%;\r\n  height: 100vh;\r\n`;\r\n\r\n\r\nexport default BackgroundContainer;","class CanvasUtils {\r\n    constructor(canvas, ctx) {\r\n        this.canvas = canvas;\r\n        this.ctx = ctx;\r\n        this.winResizeHandle();\r\n    }\r\n\r\n    drawCanvasBackground = () => {\r\n        this.ctx.fillStyle = \"#26304F\";\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n      \r\n    updateCanvasSize = () => {\r\n        this.canvas.style.width='100%';\r\n        this.canvas.style.height='100%';\r\n        this.canvas.width  = this.canvas.offsetWidth;\r\n        this.canvas.height = this.canvas.offsetHeight;\r\n    }\r\n\r\n    winResizeHandle = () => {\r\n        this.updateCanvasSize();\r\n        this.drawCanvasBackground();\r\n    }\r\n}\r\n\r\nexport default CanvasUtils;","class DrawUtils {\r\n    constructor(canvas, ctx) {\r\n        this.canvas = canvas;\r\n        this.ctx = ctx;\r\n    }\r\n\r\n    Circle(posX, posY, radius, ac_width, color) {\r\n        // draw basic circle\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(posX+125, posY, radius, 0, 2 * Math.PI, false);\r\n        this.ctx.strokeStyle  = color;\r\n        this.ctx.lineWidth = ac_width;\r\n        this.ctx.stroke();\r\n        this.ctx.closePath();\r\n    }\r\n\r\n    hitCircle(circleTime, posY, radius, AR, gameTime) {\r\n        const preempt = AR == 5 ? 1200 : 1200 + (AR > 5 ? -750 : 600) * (AR + (AR > 5 ? -5 : 5)) / 5;\r\n        const fadein = AR == 5 ? 800 : 800 + (AR > 5 ? -500 : 400) * (AR + (AR > 5 ? -5 : 5)) / 5;\r\n\r\n        // Draw main circle\r\n        this.Circle(circleTime-gameTime, posY, radius, 9, \"#425FB0\");\r\n        this.Circle(circleTime-gameTime, posY, radius * 0.85, 12, \"#494949\");\r\n        \r\n        // Draw approach circle\r\n        if (circleTime-gameTime < preempt) {\r\n            const diameter = radius * 2;\r\n            const ld = diameter * 3.0;\r\n            const difference = circleTime - gameTime;        \r\n            const ar_radius = (diameter + (ld - diameter) * (difference < preempt + fadein && difference > 0 ? difference / (preempt + fadein) : 1)) / 2;\r\n            this.Circle(circleTime-gameTime, posY, ar_radius, 5, \"#979FB6\");\r\n        }\r\n\r\n        \r\n    }\r\n    \r\n}\r\n\r\nexport default DrawUtils;","import React, { useState, useEffect, useRef } from 'react';\r\nimport styled from 'styled-components';\r\nimport Text from './components/Text';\r\nimport Container from './components/Container';\r\nimport { Table, TableRow } from './components/Table';\r\nimport PlaybackBar from './components/PlaybackBar';\r\nimport FooterDiv from './components/Footer';\r\nimport NavDiv from './components/NavDiv';\r\nimport { Keys, Key } from './components/Keys';\r\nimport LineGraph from './components/LineGraph';\r\nimport ContentContainer from './components/ContentContainer';\r\nimport BackgroundContainer from './components/BackgroundContainer';\r\nimport { useGraphData } from './contexts/GraphData';\r\nimport CanvasUtils from './utils/canvas';\r\nimport DrawUtils from './utils/draw';\r\n\r\n\r\n\r\n// Options container\r\nconst Options = styled(Container)`\r\n  grid-area: o;\r\n`;\r\n\r\n// Canvas container\r\nconst Canvas = styled.canvas`\r\n  border-radius: 9px;\r\n  grid-area: c;\r\n`;\r\n\r\nconst App = () => {\r\n  const canvasRef = useRef(null);\r\n  let mapInProgress = false;\r\n\r\n  // Keys\r\n  const key1 = \"q\";\r\n  const key2 = \"w\";\r\n  let keyDown = [false, false];\r\n  const {graphData, setGraphData} = useGraphData();\r\n  const [key1State, setKey1State] = useState(0);\r\n  const [key2State, setKey2State] = useState(0);\r\n  const [keyIsDown1, setKeyDown1] = useState(0);\r\n  const [keyIsDown2, setKeyDown2] = useState(0);\r\n\r\n\r\n\r\n  const updateData = (ekey, down) => {\r\n    // Set data\r\n    setGraphData(gd => {\r\n      const updatedClicks = [...gd.clicks, {\"key\": ekey, \"pressed\": down, \"time\": Date.now()}];\r\n      const downClicks = updatedClicks.filter(c => c.pressed);\r\n      if (downClicks.length == 0) return(gd);\r\n      const updatedAvgBpm = [...graphData.avg_bpm, Math.round((((downClicks.length / (downClicks[downClicks.length-1].time - gd.startTime) * 60000) / 4) * 100) / 100)];\r\n\r\n      return ({\r\n        startTime: gd.startTime,\r\n        clicks: updatedClicks,\r\n        avg_accuracy: [],\r\n        avg_unstable_rate: [],\r\n        avg_bpm: updatedAvgBpm \r\n      })\r\n    })\r\n  }\r\n\r\n  const keyPress = (ekey, down) => {\r\n    if ((ekey == key1 || ekey == key2) && mapInProgress) {\r\n\r\n      // Update graph data\r\n      updateData(ekey, down);\r\n\r\n      if (ekey == key1) {\r\n        if (down) setKey1State(ks => ks + 1);\r\n        setKeyDown1(down)\r\n      } else {\r\n        if (down) setKey2State(ks => ks + 1);\r\n        setKeyDown2(down)\r\n      }\r\n   } else if (ekey == \" \" && down) {\r\n     // Start\r\n     console.log(!mapInProgress ? \"Start\" : \"Stop\")\r\n     mapInProgress = !mapInProgress;\r\n\r\n     if (mapInProgress) {\r\n      // reset data\r\n      setGraphData({\r\n        startTime: Date.now(),\r\n        clicks: [],\r\n        avg_accuracy: [],\r\n        avg_unstable_rate: [],\r\n        avg_bpm: []\r\n      })\r\n     }\r\n   }\r\n    return down;\r\n  }\r\n\r\n  const getIndex = (key) => {\r\n    if (key == key1) {\r\n      return 0;\r\n    } else if (key == key2) {\r\n      return 1;\r\n    }\r\n  }\r\n\r\n  const keyPressHandle = (e) => {\r\n    let id = getIndex(e.key);\r\n    if (e.type == \"keydown\") {\r\n      if (keyDown[id]) return;\r\n      keyDown[id] = keyPress(e.key.toLowerCase(), true);\r\n    } else {\r\n      keyDown[id] = keyPress(e.key.toLowerCase(), false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    // Initialize canvas\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    const Utils = new CanvasUtils(canvas, ctx);\r\n    const Draw = new DrawUtils(canvas, ctx);\r\n\r\n\r\n    let gameTime = -1000;\r\n    const centerY = canvas.height / 2;\r\n    const radius = 90;\r\n    // change to bpm later\r\n    const secsBetweenEachObject = 100;\r\n    const AR = 9;\r\n\r\n\r\n    const hitCircles = [];\r\n\r\n    class HitCircle {\r\n      constructor(time) {\r\n        this.time = time;\r\n      }\r\n\r\n      draw() {\r\n        Draw.hitCircle(this.time, centerY, radius, AR, gameTime)\r\n      }\r\n    }\r\n\r\n    // create objects\r\n    for (let i = 0; i < 100; i++) {\r\n      const hc = new HitCircle((i+1)*secsBetweenEachObject);\r\n      hitCircles.push(hc);\r\n    }\r\n\r\n\r\n\r\n    const draw = () => {\r\n      if (!mapInProgress) return;\r\n      // clear objects\r\n      Utils.drawCanvasBackground();\r\n\r\n      // draw objects\r\n      hitCircles.forEach(o => {\r\n        // draw if within canvas\r\n        if (o.time-gameTime > 0 && o.time-gameTime  < canvas.width + radius) {\r\n          o.draw();\r\n        }\r\n      })\r\n\r\n      gameTime += 2; // draws every 10ms\r\n    }\r\n\r\n    // game loop\r\n    setInterval(draw, 2);\r\n\r\n  \r\n\r\n    // Event listeners\r\n    document.addEventListener(\"keydown\", keyPressHandle, false);\r\n    document.addEventListener(\"keyup\", keyPressHandle, false);\r\n    window.addEventListener(\"resize\", Utils.winResizeHandle);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", keyPressHandle, false);\r\n      document.removeEventListener(\"keyup\", keyPressHandle, false);\r\n      window.removeEventListener(\"resize\", Utils.winResizeHandle);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <BackgroundContainer>\r\n      <NavDiv>\r\n        <Text size={\"35px\"}>osu! Rhythm practice</Text>\r\n      </NavDiv>\r\n\r\n\r\n      <ContentContainer>\r\n        <Options />\r\n        <LineGraph />\r\n        <Canvas ref={canvasRef} />\r\n\r\n        <Keys>\r\n          <Key id=\"key1\" keyDown={keyIsDown1}>{key1State}</Key>\r\n          <Key id=\"key2\" keyDown={keyIsDown2}>{key2State}</Key>\r\n        </Keys>\r\n      </ContentContainer>\r\n\r\n      <PlaybackBar />\r\n\r\n      <Table>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n        <TableRow></TableRow>\r\n      </Table>\r\n\r\n\r\n      <FooterDiv>\r\n      </FooterDiv>\r\n    </BackgroundContainer>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { GraphContextProvider } from './contexts/GraphData';\nimport './index.css'\n\n\nReactDOM.render(\n  <GraphContextProvider>\n    <App />\n  </GraphContextProvider>,\n  \n  document.getElementById('root')\n);\n"],"sourceRoot":""}